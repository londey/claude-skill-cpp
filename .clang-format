---
# Requires clang-format 16 or later.
BasedOnStyle: LLVM

# Indentation
IndentWidth: 4
TabWidth: 4
UseTab: Never
IndentCaseLabels: true
IndentCaseBlocks: false
NamespaceIndentation: None
AccessModifierOffset: -4
IndentAccessModifiers: false
IndentWrappedFunctionNames: false
LambdaBodyIndentation: Signature

# Line length
ColumnLimit: 100

# Braces — Attach (K&R / same-line)
BreakBeforeBraces: Attach

# Short constructs
AllowShortFunctionsOnASingleLine: Empty
AllowShortBlocksOnASingleLine: Empty
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false
AllowShortLambdasOnASingleLine: Inline
AllowShortEnumsOnASingleLine: false

# Arguments and parameters — block indent, one per line when wrapping
AlignAfterOpenBracket: BlockIndent
BinPackArguments: false
BinPackParameters: false

# Alignment
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignConsecutiveMacros: false
AlignEscapedNewlines: Left
AlignOperands: Align
AlignTrailingComments: true

# Pointer and reference alignment
PointerAlignment: Left
ReferenceAlignment: Left

# Breaks
BreakBeforeBinaryOperators: None
BreakBeforeTernaryOperators: true
BreakConstructorInitializers: BeforeColon
BreakInheritanceList: BeforeColon
BreakStringLiterals: true

# Constructor initializers
PackConstructorInitializers: CurrentLine
ConstructorInitializerIndentWidth: 4

# Spaces
SpaceAfterCStyleCast: false
SpaceAfterLogicalNot: false
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeCaseColon: false
SpaceBeforeCpp11BracedList: false
SpaceBeforeCtorInitializerColon: true
SpaceBeforeInheritanceColon: true
SpaceBeforeParens: ControlStatements
SpaceBeforeRangeBasedForLoopColon: true
SpaceBeforeSquareBrackets: false
SpaceInEmptyBlock: false
SpaceInEmptyParentheses: false
SpacesInAngles: Never
SpacesInCStyleCastParentheses: false
SpacesInConditionalStatement: false
SpacesInContainerLiterals: false
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Includes
SortIncludes: CaseSensitive
IncludeBlocks: Regroup

# Misc
InsertBraces: true
InsertNewlineAtEOF: true
RemoveSemicolon: true
EmptyLineBeforeAccessModifier: Always
EmptyLineAfterAccessModifier: Never
SeparateDefinitionBlocks: Always
CompactNamespaces: false
FixNamespaceComments: true
QualifierAlignment: Left

# C++ specific
Standard: c++20
Language: Cpp
